> ìš°ì•„í•œí˜•ì œ - ë°°ë¯¼ê·¼ë‹˜

# FE ìƒíƒœê´€ë¦¬ì— ëŒ€í•´

## ìƒíƒœë€?

ì£¼ì–´ì§„ ì‹œê°„ì— ëŒ€í•´ ì‹œìŠ¤í…œì„ ë‚˜íƒ€ë‚´ëŠ” ê²ƒìœ¼ë¡œ **ì–¸ì œë“ ì§€ ë³€ê²½ë  ìˆ˜ ìˆìŒ** ì¦‰ ë¬¸ìì—´, ë°°ì—´, ê°ì²´ ë“±ì˜ í˜•íƒœë¡œ **ì‘ìš© í”„ë¡œê·¸ë¨ì— ì €ì¥ëœ ë°ì´í„°** â†’ **ê°œë°œì ì…ì¥ì—ì„  ê´€ë¦¬í•´ì•¼í•˜ëŠ” ë°ì´í„°ë“¤**

## ëª¨ë˜ ì›¹í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œ

UI/Uxì˜ ì¤‘ìš”ì„±ê³¼ í•¨ê»˜ í”„ë¡œë•íŠ¸ ê·œëª¨ê°€ ë§ì´ ì»¤ì§€ê³  FEì—ì„œ ìˆ˜í–‰í•˜ëŠ” ì—­í• ì´ ëŠ˜ì–´ë‚¨ â†’ **ê´€ë¦¬í•˜ëŠ” ìƒíƒœê°€ ë§ì•„ì§**

## ìƒíƒœê´€ë¦¬ëŠ”? (feat. FE)

- ìƒíƒœë¥¼ ê´€ë¦¬í•˜ëŠ” ë°©ë²•ì— ëŒ€í•œ ê²ƒ â†’ í”„ë¡œë•íŠ¸ê°€ ì»¤ì§ì— ë”°ë¼ ì–´ë ¤ì›€ë„ ì»¤ì§
- ìƒíƒœë“¤ì€ ì‹œê°„ì— ë”°ë¼ ë³€í™”í•¨
- Reactì—ì„  ë‹¨ë°©í–¥ ë°”ì¸ë”©ì´ë¯€ë¡œ Props Drilling ì´ìŠˆë„ ì¡´ì¬
- Redexì™€ MobX ê°™ì€ ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ í™œìš©í•´ í•´ê²°í•˜ê¸°ë„ í•¨

**â†’ ëª¨ë˜ ì›¹ í”„ë¡ íŠ¸í™˜ê²½ì—ì„œëŠ” ì—¬ëŸ¬ê°€ì§€ ìƒíƒœë“¤ì´ ì¡´ì¬í•˜ê³  ì´ ìƒíƒœë“¤ì„ ì²´ê³„ì ìœ¼ë¡œ ê´€ë¦¬í•˜ê¸° ìœ„í•œ ìƒíƒœê´€ë¦¬ ë‹´ë¡ ë“¤ì´ ë“±ì¥í–ˆë‹¤**

# ì£¼ë¬¸ FE í”„ë¡œë•íŠ¸ë¥¼ ë³´ë©° ê°€ì§„ ê³ ë¯¼

## ì£¼ë¬¸ FE í”„ë¡œë•íŠ¸

- ì¥ë°”êµ¬ë‹ˆ
- ì£¼ë¬¸í•˜ê¸°
- ê²°ì œí•˜ê¸°
- ìš”ì²­ì™„ë£Œ
- ê²°ì œì™„ë£Œ
- ì£¼ë¬¸ë‚´ì—­

â†’ ì´ ëª¨ë“  ê²ƒì´ ì›¹ë·°ë¡œ êµ¬ì„±ë˜ì–´ ìˆë‹¤..

## ë•ŒëŠ” ë°”ì•¼íë¡œ 2021ì˜ ì—¬ë¦„

- ë ˆê±°ì‹œë¥¼ ì²­ì‚°
- Storeì— ìƒíƒœê´€ë ¨ ì½”ë“œë³´ë‹¤ API í†µì‹ ê´€ë ¨ ì½”ë“œê°€ ë” ë§ìŒ
- ì ì€ ì¸ì›ìœ¼ë¡œ ë ˆí¬ì§€í† ë¦¬ ê´€ë¦¬
- íŒ€ë‚´ì—ì„œ ìƒì„±ë˜ëŠ” ë ˆí¬ì§€í† ë¦¬ê°€ ë§ìŒ
- ë°˜ë³µë˜ëŠ” ì»´í¬ë„ŒíŠ¸, ë¡œì§
- ì˜ì¡´ì„± ëª¨ë“ˆ ë²„ì „ ë¬¸ì œ

â†’ Repoí•©ì¹˜ê³ , ë ˆê±°ì‹œ ì¹˜ìš°ê³  ì‹ ê¸°ìˆ  ê²€í† ë„ í•˜ë©´ì„œ ì£¼ë¬¸ FE ì•„í‚¤í…ì³ í†µí•©í•˜ê¸°

## ê·¸ ì¤‘ ìƒíƒœê´€ë¦¬ì— ê´€í•œ ê³ ë¯¼

StoreëŠ” ì „ì—­ ìƒíƒœê°€ ì €ì¥ë˜ê³  ê´€ë¦¬ë˜ëŠ” ê³µê°„ì¸ë° ìƒíƒœê´€ë¦¬ë³´ë‹¨ API í†µì‹  ì½”ë“œì˜ ì–‘ì´ ë” ë§ì•˜ë‹¤

## ì—¬ê¸°ì„œ ë‹¤ ê´€ë¦¬í•˜ëŠ”ê²Œ ë§ë‚˜..?

- API í†µì‹  ê´€ë ¨ ì½”ë“œê°€ ëª¨ë‘ Storeì—?
- ë˜, ë°˜ë³µë˜ëŠ” `isFetching`, `isError` ë“± API ê´€ë ¨ ìƒíƒœ
- ë˜ë˜, ë°˜ë³µë˜ëŠ” ë¹„ìŠ·í•œ êµ¬ì¡°ì˜ API í†µì‹  ì½”ë“œ

â†’ ìƒíƒœê´€ë¦¬ ì˜ì—­ì´ ì„œë²„ê°’ì„ ì €ì¥í•˜ëŠ”ë°ê¹Œì§€ í™•ì¥

## ì„œë²„ì—ì„œ ë°›ì•„ì•¼í•˜ëŠ” ìƒíƒœë“¤ì˜ íŠ¹ì„±

- Clientì—ì„œ ì œì–´í•˜ê±°ë‚˜ ì†Œìœ ë˜ì§€ ì•Šì€ ì›ê²©ì˜ ê³µê°„ì—ì„œ ê´€ë¦¬ë˜ê³  ìœ ì§€ë¨
- Fetchingì´ë‚˜ Updatingì— ë¹„ë™ê¸° APIê°€ í•„ìš”í•¨
- ë‹¤ë¥¸ ì‚¬ëŒë“¤ê³¼ ê³µìœ ë˜ëŠ” ê²ƒìœ¼ë¡œ ì‚¬ìš©ìê°€ ëª¨ë¥´ëŠ” ì‚¬ì´ì— ë³€ê²½ë  ìˆ˜ ìˆìŒ
- ì‹ ê²½ ì“°ì§€ ì•ŠëŠ”ë‹¤ë©´ ì ì¬ì ìœ¼ë¡œ â€œout of dateâ€ê°€ ë  ê°€ëŠ¥ì„±ì„ ì§€ë‹˜

â†’ ì‚¬ì‹¤ìƒ FEì—ì„œ ì´ ê°’ë“¤ì´ ì €ì¥ë˜ì–´ìˆëŠ” stateë“¤ì€ ì¼ì¢…ì˜ ìºì‹œ

## ìƒíƒœë¥¼ ë‘ ê°€ì§€ë¡œ ë‚˜ëˆ„ì–´ ë´…ì‹œë‹¤

Key PointëŠ” ë°ì´í„°ì˜ Ownershipì´ ìˆëŠ” ê³³

### Client State

- Clientì—ì„œ ì†Œìœ í•˜ë©° ì˜¨ì „íˆ ì œì–´ê°€ëŠ¥í•¨
- ì´ˆê¸°ê°’ ì„¤ì •ì´ë‚˜ ì¡°ì‘ì— ì œì•½ì‚¬í•­ ì—†ìŒ
- ë‹¤ë¥¸ ì‚¬ëŒë“¤ê³¼ ê³µìœ ë˜ì§€ ì•Šìœ¼ë©° Client ë‚´ì—ì„œ UI/UXíë¦„ì´ë‚˜ ì‚¬ìš©ì ì¸í„°ë ‰ì…˜ì— ë”°ë¼ ë³€í•  ìˆ˜ ìˆìŒ
- í•­ìƒ Client ë‚´ì—ì„œ ìµœì‹  ìƒíƒœë¡œ ê´€ë¦¬ë¨

â†’ Ownershipì´ Clientì—!

### Server State

- Clientì—ì„œ ì œì–´í•˜ê±°ë‚˜ ì†Œìœ ë˜ì§€ ì•Šì€ ì›ê²©ì˜ ê³µê°„ì—ì„œ ê´€ë¦¬ë˜ê³  ìœ ì§€ë¨
- Fetching/Updatingì— ë¹„ë™ê¸° APIê°€ í•„ìš”í•¨
- ë‹¤ë¥¸ ì‚¬ëŒë“¤ê³¼ ê³µìœ ë˜ëŠ” ê²ƒìœ¼ë¡œ ì‚¬ìš©ìê°€ ëª¨ë¥´ëŠ” ì‚¬ì´ì— ë³€ê²½ë  ìˆ˜ ìˆìŒ
- ì‹ ê²½ ì“°ì§€ ì•ŠëŠ”ë‹¤ë©´ ì ì¬ì ìœ¼ë¡œ â€œout of dateâ€ê°€ ë  ê°€ëŠ¥ì„±ì„ ì§€ë‹˜

â†’ Ownershipì´ Serverì—!

## ë‹¤ì‹œ, ìƒíƒœê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬

ì–˜ë„¤ê°€ ì§€ê¸ˆì— ì™€ì„œë„ ì„œë²„ ìƒíƒœë¥¼ ê´€ë¦¬í•˜ê¸° ì í•©í• ê¹Œìš”?

- Redux
- MobX
- Recoil

â†’ ì£¼ë¬¸ FE í”„ë¡œë•íŠ¸ì—ì„œ ì„ íƒí•œ í•´ë‹µì€ **React Query**

# React Query ì‚´í´ë³´ê¸°

## React Query ìê¸°ì†Œê°œ

Fetch, cache and update data in your React and React Native applications all without touching any â€œglobal stateâ€.

- Declarative & Automatic
- Simple & Familiar
- Powerful & Configurable

## Overview

React Query is often described as the missing data-fetching library for React, but in more technical terms, it makes fetching, caching, synchronizing and updating server state in your React applications a breeze.

- ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
- ìºì‹œ
- ë™ê¸°í™”
- ë°ì´í„° ì—…ë°ì´íŠ¸

â†’ ì„œë²„ ìƒíƒœë¥¼ ê´€ë¦¬

---

React Query is gands down one of the best libaries for managing server state. It works amazingly well out-of-the-box, with zero-config, and can be customized to your liking as your application grows.

â†’ React QueryëŠ” zero-configë¡œ ì¦‰ì‹œ ì‚¬ìš©ê°€ëŠ¥, But ì›í•˜ë©´ ì–¸ì œë“  configë„ ì»¤ìŠ¤í…€ ê°€ëŠ¥!

## ëê³  ê°„ë‹¨í•œ ì˜ˆì œ í•˜ë‚˜

> ê³µì‹ë¬¸ì„œ ì˜ˆì œ

```jsx
import { QueryClient, QueryClientProvider, useQuery } from "react-query";

const queryClient = new QueryClient();

export default function App() {
  return (
    <QueryClientProvider client={queryClient}>
      <Example />
    </QueryClientProvider>
  );
}

function Example() {
  const { isLoading, error, data } = useQuery("repoData", () =>
    fetch("https://api.github.com/repos/tannerlinsley/react-query").then(
      (res) => res.json()
    )
  );

  if (isLoading) return "Loading...";

  if (error) return "An error has occurred: " + error.message;

  return (
    <div>
      <h1>{data.name}</h1>
      <p>{data.description}</p>
      <strong>ğŸ‘€ {data.subscribers_count}</strong>{" "}
      <strong>âœ¨ {data.stargazers_count}</strong>{" "}
      <strong>ğŸ´ {data.forks_count}</strong>
    </div>
  );
}
```

â†’ ë”±íˆ configë„ ì—†ê³  ì½”ë“œë„ React Hooksê°™ê³  ì²« ì¸ìƒì€ ê·¸ë˜ë„ ì¢€ ê°„ë‹¨í•´ ë³´ì¸ë‹¤

## ë³¸ê²©ì ìœ¼ë¡œ ì•Œì•„ë³´ê¸° ì „ì—!

Reactì—ì„œ ì‚¬ìš©í•˜ë ¤ë©´ QueryClientProvider í•„ìˆ˜

```jsx
import { QueryClient, QueryClientProvider, useQuery } from "react-query";

const queryClient = new QueryClient();

export default function App() {
  return (
    <QueryClientProvider client={queryClient}>
      <Example />
    </QueryClientProvider>
  );
}
```

## ì„¸ ê°€ì§€ core ì»¨ì…‰ ì‚´í´ë³´ê¸°

ê³µì‹ ë¬¸ì„œ Quick Startì—ì„œ ì§šì€ 3ê°€ì§€ ê°œë…

### Queries

- A query is a declarative dependency on an asynchronous source of data that is tied to a unique key
- A query can be used with any Promise based method (including GET and POST methods) to fetch data form a server.
- If your method modifies data on the server, we recommend using Mutations instead.

**â†’ QueriesëŠ” ë°ì´í„° Fetchingìš©! CRUD ì¤‘ Readingì—ë§Œ ì‚¬ìš©í•  ê±°ì—ìš”**

```jsx
import { useQuery } from "react-query";

function App() {
  const info = useQuery("todos", fetchTodoList);
  // useQuery(Query Key, Query Function)
}
```

**Query Key**

React QueryëŠ” Query Keyì— ë”°ë¼ query cachingì„ ê´€ë¦¬í•©ë‹ˆë‹¤. â†’ Key, Value ë§µí•‘êµ¬ì¡° ìƒê°

- String í˜•íƒœ

```jsx
// A list of todos
useQuery('todos', ...); // queryKey === ['todos']

// Something else, whatever!
useQuery('somethingSpecial', ...) // queryKey === ['somethingSpecial']
```

- Array í˜•íƒœ

```jsx
// An individual todo
useQuery(['todo', 5], ...);
// queryKey === ['todo', 5]

// An individual todo in a "preview" format
useQuery(['todo', 5, { preview: true }], ...);
// queryKey === ['todo', 5, { preview: true }]

// A list of todos that are "done"
useQuery(['todos', { type: 'done' }], ...);
// queryKey === ['todos', { type: 'done'  }]
```

**Query Function**

Promiseë¥¼ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ â†’ ë°ì´í„°ë¥¼ resolve í•˜ê±°ë‚˜ errorë¥¼ throw

**ê·¸ëŸ¼ useQueryê°€ ë°˜í™˜í•˜ëŠ” ê²ƒì€?**

- `data` : ë§ˆì§€ë§‰ìœ¼ë¡œ ì„±ê³µí•œ resolveëœ ë°ì´í„° (Response)
- `error` : ì—ëŸ¬ê°€ ë°œìƒí–ˆì„ ë•Œ ë°˜í™˜ë˜ëŠ” ê°ì²´
- `isFetching` : Requestê°€ in-flight ì¤‘ì¼ ë•Œ `true`
- `status` `isLoading` `isSuccess` ë“± : ëª¨ë‘ í˜„ì¬ queryì˜ ìƒíƒœ
- `refetch` : í•´ë‹¹ query refetchí•˜ëŠ” í•¨ìˆ˜ ì œê³µ
- `remove` : í•´ë‹¹ query cacheì—ì„œ ì§€ìš°ëŠ” í•¨ìˆ˜ ì œê³µ

â†’ ì´ ì™¸ì—ë„ ë§ì€ ê°’ì„ ë°˜í™˜í•˜ë‹ˆ ê³µì‹ë¬¸ì„œ ê¼­ í™•ì¸í•˜ê¸°

**config ì»¤ìŠ¤í…€ì„ í•´ë³´ì! useQueryì˜ Option**

- `onSuccess` `onError` `onSettled` : query fetching ì„±ê³µ/ì‹¤íŒ¨/ì™„ë£Œ ì‹œ ì‹¤í–‰í•  Side Effect ì •ì˜
- `enabled` : ìë™ìœ¼ë¡œ queryë¥¼ ì‹¤í–‰ì‹œí‚¬ì§€ ë§ì§€ ì—¬ë¶€
- `retry` : query ë™ì‘ ì‹¤íŒ¨ ì‹œ, ìë™ìœ¼ë¡œ retry í• ì§€ ê²°ì •í•˜ëŠ” ì˜µì…˜
- `select` : ì„±ê³µ ì‹œ ê°€ì ¸ì˜¨ dataë¥¼ ê°€ê³µí•´ì„œ ì „ë‹¬
- `keepPreviousData` : ìƒˆë¡­ê²Œ fetching ì‹œ ì´ì „ ë°ì´í„° ìœ ì§€ ì—¬ë¶€
- `refetchInterval` : ì£¼ê¸°ì ìœ¼ë¡œ refetch í• ì§€ ê²°ì •í•˜ëŠ” ì˜µì…˜

â†’ ì´ê²Œ ë‹¤ê°€ ì•„ë‹ˆë‹¤ ê³µì‹ë¬¸ì„œ ê¼­ ì½ì!

**queries íŒŒì¼ ë¶„ë¦¬ë„ ì¶”ì²œ!**

- Query ì„ ì–¸ë¶€

```jsx
export const useFetchOrder = (orderNo, options) =>
  useQuery("fetchOrder", () => fetchOrder(orderNo), options);

export const useFetchDeliveryStatus = (orderNo, options) =>
  useQuery("fetchDeliveryStatus", () => fetchDeliveryStatus(orderNo), options);
```

- Components

```jsx
const fetchOrderResult = useFetchOrder(orderNo, {
  onSuccess: (fetchOrderResultData) => {
    // onSuccess ë¡œì§
  },
  onError: (error) => {
    // onError ë¡œì§
  },
});

const fetchDeliveryStatusResult = useFetchDeliveryStatus(orderNo, {
  onSuccess: (data) => {
    // onSuccess ë¡œì§
  },
  onError: (error) => {
    // onError ë¡œì§
  },
});
```

**ê·¸ëŸ¼ queryê°€ ì—¬ëŸ¬ ê°œì¼ ë•**

```jsx
function App() {
  const usersQuery = useQuery("users", fetchUsers);
  const teamsQuery = useQuery("teams", fetchTeams);
  const projectsQuery = useQuery("projects", fetchProjects);
}
```

**ê·¸ëŸ¼ ì§ˆë¬¸1! (ê¸°ìˆ ë¸”ë¡œê·¸ ëŒ“ê¸€ ë°œì·Œ)**

useQuery()ë¥¼ ì“¸ ë•Œ ì„ ì–¸ì ì¸ ì„±ê²© ë•Œë¬¸ì— ê³ ë¯¼ë  ë•Œê°€ ìˆì—ˆìŠµë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´ ë§ˆìš´íŠ¸ ì‹œì—ëŠ” ë°ì´í„°ê°€ íŒ¨ì¹˜ë˜ì§€ ì•Šê³  ë²„íŠ¼ì„ í´ë¦­í–ˆì„ ë•Œ ë°ì´í„°ë¥¼ íŒ¨ì¹˜ ë°›ì•„ì„œ ë°ì´í„°ì— ë”°ë¼ history.push í•´ì•¼í•˜ëŠ” ìƒí™©ì„ ê°€ì •

1. enabledë¥¼ falseë¡œ ë‘ê³  ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì—ì„œ refetch()ë¡œ ë§¤ë‰´ì–¼í•˜ê²Œ íŒ¨ì¹˜í•˜ëŠ” ë°©ë²•

2. enabledì˜µì…˜ì— í•´ë‹¹í•˜ëŠ” ìƒíƒœë¥¼ useStateë¡œ ì»´í¬ë„ŒíŠ¸ë‚´ì— ë‘ê³ , ì´ë²¤íŠ¸ í•¸ë“¤ëŸ¬ì—ì„œ í•´ë‹¹ ìƒíƒœ ê°’ì„ ë³€ê²½í•˜ì—¬ enabledë¥¼ ì¡°ê±´ë¶€ë¡œ ë§Œì¡±ì‹œì¼œ íŒ¨ì¹˜ ì‹œí‚¤ëŠ” ë°©ë²•

github discussionì„ ì‚´í´ë³´ë‹ˆ react queryì œì‘ìë“¤ì€ ì„ ì–¸ì ì´ë¼ëŠ” ì´ìœ ë¡œ 2)ë¥¼ ê¶Œì¥í•˜ëŠ” ê²ƒìœ¼ë¡œ ë³´ì¸ë‹¤. (ì°”ëŸ¬ì•¼í•  APIê°€ ë§ì„ ë•Œ, ê´€ë¦¬í•  stateê°€ ë„ˆë¬´ ë§ì•„ì§„ë‹¤)

**â†’ ë°°ë¯¼ì¤€ë‹˜ì€ ê°„ë‹¨í•œ ìƒí™©ì—ëŠ” 1ë²ˆì„ ì‚¬ìš©í•˜ê³  ë³µì¡í•œ ì»¨ë””ì…˜ì¼ ê²½ìš° 2ë²ˆì„ ì‚¬ìš©, ì½”ë“œì˜ ë³µì¡ë„ê°€ ì˜¬ë¼ê°ˆ ìˆ˜ ìˆê¸° ë•Œë¬¸**

> ê³½ì¬í˜• : â€œë°±ì—”ë“œì—ê²Œ API ë¥¼ íŒŒë‹¬ë¼ê³ í•˜ê³  í•œë²ˆì— ê°€ì ¸ì˜¨ë‹¤â€
> ìš°ì•„í•œTech : ì¬í˜•ë‹˜ê»˜ ì¿ í°ì„ ë“œë¦¬ê² ìŠµë‹ˆë‹¤~! ã…ã…
> ??? : ã…‹ã…‹ã…‹ã…‹ã…‹ã…‹

**ê·¸ëŸ¼ ì§ˆë¬¸2!**

useQueryë¥¼ ì´ìš©í•´ ë¶ˆëŸ¬ì˜¨ server stateë¥¼ ì´ìš©í•´ ì•¡ì…˜ì„ ìƒì„±í•´ì•¼ í•˜ëŠ” ê²½ìš°ê°€ ìˆì„í…ë°, ì´ ë•ŒëŠ” ì–´ëŠ ë‹¨ê³„ (action creator?) ì—ì„œ server stateë¥¼ ì°¸ì¡°í•˜ë‚˜ìš”?

**â†’ `options`ì˜ `onSuccess`ì—ì„œ dispatchë¥¼ ë°œìƒì‹œì¼œ client stateë¥¼ ë³€í™”ì‹œí‚¨ë‹¤**

### Mutations

- Unlike quries, mutations are typically used to create/update/delete data or perform server side-effetcs. For this purpose, React Query exports a useMutation hook.

**â†’ CRUD ì¤‘ Create/Update/Deleteì— ëª¨ë‘ ì‚¬ìš©í• ê±°ì—ìš”**

```jsx
const mutation = useMutation((newTodo) => {
  return axios.post("/todos", newTodo);
});
```

useQuery ë³´ë‹¤ ë” ì‹¬í”Œí•˜ê²Œ Promise ë°˜í™˜ í•¨ìˆ˜ë§Œ ìˆì–´ë„ ëœë‹¤. ë‹¨, Query Keyë¥¼ ë„£ì–´ì£¼ë©´ devtoolsì—ì„œ ë³¼ ìˆ˜ ìˆë‹¤.

**useMutation**

- `mutate` : mutationì„ ì‹¤í–‰í•˜ëŠ” í•¨ìˆ˜
- `mutateAsync` : mutateì™€ ë¹„ìŠ· But Promise ë°˜í™˜
- `reset` : mutation ë‚´ë¶€ ìƒíƒœ clean

â†’ ë‚˜ë¨¸ì§€ëŠ” useQueryë‘ ë¹„ìŠ·í•˜ë‹¤ ì˜¤íˆë ¤ ë°˜í™˜í•˜ëŠ” ê°’ì´ ë” ì ë‹¤! ê·¸ë˜ë„ ê³µì‹ë¬¸ì„œ ê¼­ ë³´ì?

**useMutation Option**

- `onMutate` : ë³¸ê²©ì ì¸ Mutation ë™ì‘ ì „ì— ë¨¼ì € ë™ì‘í•˜ëŠ” í•¨ìˆ˜, Optimistic update ì ìš©í•  ë•Œ ìœ ìš©

â†’ ë‚˜ë¨¸ì§€ëŠ” useQueryë‘ ë¹„ìŠ·í•˜ë‹¤ ì˜¤íˆë ¤ Optionì´ ë” ì ë‹¤! ê·¸ë˜ë„.. ë§ ì•ˆí•´ë„ ì•Œì§€?

### Query Invalidation

- ê°„ë‹¨íˆ queryClientë¥¼ í†µí•´ invalidate ë©”ì†Œë“œë¥¼ í˜¸ì¶œí•˜ë©´ ë!

```jsx
// Invalidate every query in the cache
queryClient.invalidateQueries();

// Invalidate every query with a key that starts with `todos`
queryClient.invalidateQueries("todos");
```

- ì´ëŸ¬ë©´ í•´ë‹¹ Query Keyë¥¼ ê°€ì§„ queryëŠ” stale(ì‹ ì„ í•˜ì§€ ì•ŠìŒ) ì·¨ê¸‰ë˜ê³ , í˜„ì¬ rendering ë˜ê³  ìˆëŠ” queryë“¤ì€ ë°±ê·¸ë¼ìš´ë“œì—ì„œ refetch ëœë‹¤.
